{"version":3,"sources":["src\\widget\\Layout\\App\\appView.jsx"],"names":["skinStyle","setCurrTabKey","location","window","CURR_TAB_KEY","pathname","AppView","children","dispatch","app","loading","config","currTabTitle","isB2bLogin","tmpAuth","userInfoKey","href","redirectLoginUrl","appName","models"],"mappings":";;;;;;AACA;;;;AAIA;;;;AAEA;;AAEA;;IAAYA,S;;AAEZ;;AAEA;;AAEA;;AAEA;;;;AAEA;;AAEA;;;;AAEA;;;;AAEA;;;;AAEA;;AAGA;;;;AAEA;;;;AACA;;AACA;;AACA;;;;;;AAEA;;AANA;;AALA;;AAJA;;AAJA;;AARA;;AAEA;;AAEA;;AARA;;AAJA;AAoCA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,QAAD,EAAc;AAClCC,SAAOC,YAAP,GAAsBF,SAASG,QAA/B;AACD,CAFD;;AAIA;;;AAbA;;AALA;;AAJA;;AAJA;;AARA;;AAJA;AAJA;AA2CA,SAASC,OAAT,OAA8D;AAAA,MAA5CC,QAA4C,QAA5CA,QAA4C;AAAA,MAAlCL,QAAkC,QAAlCA,QAAkC;AAAA,MAAxBM,QAAwB,QAAxBA,QAAwB;AAAA,MAAdC,GAAc,QAAdA,GAAc;AAAA,MAATC,OAAS,QAATA,OAAS;;AAC5D,MAAG,iBAAIC,aAAJ,EAAY,OAAZ,CAAH,EAAwB;AACtB;AACAV,kBAAcC,QAAd;AACD;;AAED;AAN4D,MAOpDU,YAPoD,GAOnCH,GAPmC,CAOpDG,YAPoD;AAQ5D;;AACA;AACA;AACA,MAAGD,cAAOE,UAAV,EAAsB;AACpB,QAAIC,UAAU,iBAAI,+BAAaH,cAAOI,WAApB,CAAJ,EAAsC,MAAtC,EAA8C,EAA9C,CAAd;AACAD,gBAAYX,OAAOD,QAAP,CAAgBc,IAAhB,GAAuBL,cAAOM,gBAA1C;AACD;;AAED;AACA,SACE;AAAA;AAAA,MAAK,WAAU,aAAf;AAEE;AAAC,yBAAD;AAAA;AACE;AAAA;AAAA;AAASN,sBAAOO;AAAhB;AADF,KAFF;AAME;AAAA;AAAA,QAAK,WAAU,QAAf,EAAwB,IAAG,YAA3B;AAEE,oCAAC,oBAAD,OAFF;AAKE;AAAA;AAAA,UAAO,WAAU,OAAjB;AACE,sCAAC,mBAAD;AADF,OALF;AAUE;AAAA;AAAA,UAAK,WAAU,MAAf;AAGI,yBAAIP,aAAJ,EAAY,OAAZ,KACE;AAAA;AAAA;AACE,wCAAC,eAAD,IAAO,UAAUT,QAAjB,EAA2B,cAAcU,YAAzC,GADF;AAEE;AAAA;AAAA,cAAK,MAAK,cAAV,EAAyB,OAAO,EAAC,UAAU,MAAX,EAAoB,aAAa,qBAAjC,EAAhC;AACE;AAAA;AAAA,gBAAK,KAAKV,SAASG,QAAnB;AACIE;AADJ;AADF,WAFF;AAOE,wCAAC,oBAAD;AAPF,SAJN;AAkBI,SAAC,iBAAII,aAAJ,EAAY,OAAZ,CAAD,IACE,8BAAC,kBAAD;AACE,oBAAWJ,QADb;AAEE,uBAAa,IAFf;AAGE,oBAAWL,QAHb;AAIE,wBAAeU;AAJjB;AAnBN;AAVF;AANF,GADF;AAkDD;;kBAEc,kBAAQ;AAAA,MAAEH,GAAF,SAAEA,GAAF;AAAA,MAAOC,OAAP,SAAOA,OAAP;AAAA,SAAqB,EAACD,QAAD,EAAMC,SAASA,QAAQS,MAAR,CAAeV,GAA9B,EAArB;AAAA,CAAR,EAAkEH,OAAlE,C","file":"appView.jsx","sourceRoot":"C:/Users/liu.ping/helloReact","sourcesContent":["// 加载React\r\nimport React from 'react'\r\n// 加载Component\r\nimport { Component, PureComponent } from 'react'\r\n// 样式管理器\r\nimport cx from 'classnames'\r\n// 定义html head\r\nimport {Helmet} from 'react-helmet'\r\n// 全局皮肤样式\r\nimport * as skinStyle from 'css/skin.less'\r\n// 公共样式\r\nimport 'css/common.less'\r\n// 主题样式\r\nimport 'css/theme.less'\r\n// 当前组件样式\r\nimport './AppStyle.less'\r\n// 给文档添加皮肤样式\r\nimport bodyClass  from '../bodyClass'\r\n// 站点配置\r\nimport {config} from 'utils'\r\n// 头部组件\r\nimport Banner from '../Banner/BannerView'\r\n// 左侧栏组件\r\nimport Sider from '../Sider/SiderView'\r\n// 页签组件\r\nimport YxTab from 'widget/PageTabs'\r\n// 引入DVA路由组件\r\nimport { Link, hashHistory } from 'dva/router'\r\n\r\n// 引入底部组件\r\nimport Footer from '../Footer/FooterView'\r\n// 引入面包屑\r\nimport Bread from '../Bread/Bread'\r\nimport { connect } from 'dva'\r\nimport { has, get } from 'lodash'\r\nimport {getLocalData} from 'utils/globalScope'\r\n\r\n// 设置当前tab的key\r\nconst setCurrTabKey = (location) => {\r\n  window.CURR_TAB_KEY = location.pathname\r\n}\r\n\r\n// 导出组件\r\nfunction AppView({children, location, dispatch, app, loading}){\r\n  if(has(config, 'noTab')){\r\n    // 设置当前tab的key\r\n    setCurrTabKey(location)\r\n  }\r\n\r\n  // 当前选项卡 - 标题 + 路由对象\r\n  const { currTabTitle } = app\r\n  // 给文档添加皮肤样式\r\n  bodyClass()\r\n  //企业中心，需判断是否有门户传来的auth\r\n  if(config.isB2bLogin) {\r\n    let tmpAuth = get(getLocalData(config.userInfoKey), 'auth', '');\r\n    tmpAuth || (window.location.href = config.redirectLoginUrl);\r\n  }\r\n\r\n  // 渲染内容\r\n  return (\r\n    <div className='layout-ns-g'>\r\n      {/* 重定义html的head */}\r\n      <Helmet>\r\n        <title>{ config.appName }</title>\r\n      </Helmet>\r\n\r\n      <div className='layout' id=\"layoutCont\">\r\n        {/* 顶部banner - 包含logo、系统名称、登录者名称等 */}\r\n        <Banner/>\r\n\r\n        {/* 左侧栏 - 包含操作菜单 */}\r\n        <aside className='sider'>\r\n          <Sider/>\r\n        </aside>\r\n\r\n        {/* 右侧内容区 - 包含页签 */}\r\n        <div className='main'>\r\n          {/* 无页签的情况 */}\r\n          {\r\n            has(config, 'noTab') && (\r\n              <div>\r\n                <Bread location={location} currTabTitle={currTabTitle}/>\r\n                <div name='tabContainer' style={{'margin': '16px',  'minHeight': 'calc(100vh - 180px)'}}>\r\n                  <div key={location.pathname}>\r\n                    { children }\r\n                  </div>\r\n                </div>\r\n                <Footer />\r\n              </div>\r\n            )\r\n          }\r\n\r\n          {/* 有页签的情况 */}\r\n          {\r\n            !has(config, 'noTab') && (\r\n              <YxTab\r\n                tabProps={ children }\r\n                headerProps={null}\r\n                location={ location }\r\n                currTabTitle={ currTabTitle }\r\n              />\r\n            )\r\n          }\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connect(({app, loading}) => ({app, loading: loading.models.app}))(AppView)\r\n"]}