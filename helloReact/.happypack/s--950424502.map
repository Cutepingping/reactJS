{"version":3,"sources":["src\\widget\\Editor\\KingEditor.js"],"names":["Component","React","random_string","len","chars","maxPos","length","pwd","i","charAt","Math","floor","random","get_suffix","filename","pos","lastIndexOf","suffix","substring","calculate_object_name","g_dirname","group","g_object_name","indexOf","decodeURIComponent","getUploadCfg","policyUrl","auth","file","$","ajax","url","type","headers","then","res","uploadCfg","uploadImgServer","data","host","uploadImgParams","OSSAccessKeyId","accessid","policy","signature","key","dir","name","size","success_action_status","fail","err","postObject2OSS","formData","FormData","ump","Object","keys","map","k","append","cache","processData","contentType","tmpKey","client_width","client_height","beforeUpload","attachType","defer","Deferred","limitObj","limitKeys","inArray","reject","isLtSize","resolve","uploadObject2OSS","flag","props","context","editItem","state","visible","frameWidth","nextProps","nextState","prevProps","prevState","html","initEditor","policy_url","config","getPolicyUrl","Cookie","get","cookie","ceil","customConfig","uploadJson","resizeType","allowFileManager","allowFlashUpload","allowMediaUpload","allowFileUpload","afterChange","inputChange","items","KIND_EDITOR_ITEMS_CONFIG","customUploadImg","files","insert","self","imgUrl","status","alert","prototype","toString","call","hideDialog","errorObj","JSON","parse","responseText","resultMsg","e","console","error","afterCreate","that","sync","beforeSetHtml","afterSetHtml","log","afterBlur","KindEditor","create","id","customStyle","style","width","height"],"mappings":"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","file":"KingEditor.js","sourceRoot":"C:/Users/liu.ping/helloReact","sourcesContent":["/*\r\n * 富文本（新）\r\n *\r\n * @author 乐毅、苏离、战龙\r\n * @since 2018/06/12\r\n */\r\n\r\nimport React from 'react'\r\nimport { get } from 'lodash'\r\nimport { Modal, Button, Icon } from 'antd'\r\nimport styles from './Editor.less'\r\nimport $ from 'jquery'\r\nimport Cookie from 'js-cookie'\r\nimport config from '../../config/config'\r\nimport \"assets/kindEditor/kindeditor-all\"\r\nimport \"assets/kindEditor/lang/zh-CN.js\"\r\nimport \"assets/kindEditor/qs.min.js\"\r\nimport \"assets/kindEditor/kindeditor-config\"\r\n\r\nconst { Component } = React\r\n\r\nfunction random_string(len) {\r\n  len = len || 32;\r\n  var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n  var maxPos = chars.length;\r\n  var pwd = '';\r\n  for (let i = 0; i < len; i++) {\r\n    pwd += chars.charAt(Math.floor(Math.random() * maxPos));\r\n  }\r\n  return pwd;\r\n}\r\n\r\nfunction get_suffix(filename) {\r\n  let pos = filename.lastIndexOf('.')\r\n  let suffix = ''\r\n  if (pos != -1) {\r\n    suffix = filename.substring(pos)\r\n  }\r\n  return suffix;\r\n}\r\n\r\nfunction calculate_object_name(g_dirname, group, filename) {\r\n  if(!filename){\r\n    return '';\r\n  }\r\n  let suffix = get_suffix(filename)\r\n  let g_object_name = g_dirname + random_string(10) + suffix\r\n  if(!!group){\r\n    if(g_dirname.indexOf('/') == -1){\r\n      g_dirname += '/'\r\n    }\r\n    g_object_name = decodeURIComponent(g_dirname + group + '/' + random_string(10) + suffix)\r\n  }\r\n  return g_object_name;\r\n}\r\n\r\n// 获取OSS上传配置\r\nfunction getUploadCfg(policyUrl, auth, file, group){\r\n\r\n  return $.ajax({\r\n    url: policyUrl,\r\n    type: \"GET\",\r\n    headers: { auth: auth }\r\n\r\n  }).then((res) => {\r\n    let uploadCfg = {}\r\n\r\n    uploadCfg.uploadImgServer = res.data.host\r\n    uploadCfg.uploadImgParams = {\r\n      OSSAccessKeyId: res.data.accessid,\r\n      policy: res.data.policy,\r\n      signature: res.data.signature,\r\n      key: calculate_object_name(res.data.dir, group || 'home', file && file.name),\r\n      name: file && file.name,\r\n      size: file && file.size,\r\n      success_action_status: '200'\r\n    }\r\n    uploadCfg.file = file\r\n\r\n    return uploadCfg\r\n\r\n  }).fail((err) => {\r\n    return err\r\n  })\r\n}\r\n\r\n// 上传对象到OSS\r\nfunction postObject2OSS(uploadCfg, file){\r\n  // FormData对象\r\n  let formData = new FormData()\r\n\r\n  // 附加参数\r\n  let ump = uploadCfg.uploadImgParams\r\n  Object.keys(ump).map((k, i) => {\r\n    formData.append(k, ump[k])\r\n  })\r\n  formData.append('file', uploadCfg.file)\r\n\r\n  // 上传文件\r\n  return $.ajax({\r\n    url: uploadCfg.uploadImgServer,\r\n    type: 'POST',\r\n    cache: false,\r\n    data: formData,\r\n    processData: false,\r\n    contentType: false\r\n  }).then(function(res) {\r\n    let tmpKey = ump.key\r\n\r\n    if(!!file.client_width || !!file.client_height){\r\n      tmpKey += '?x-oss-process=image/resize'\r\n\r\n      if(!!file.client_width){\r\n        tmpKey += `,w_${file.client_width}`\r\n      }\r\n\r\n      if(!!file.client_height){\r\n        tmpKey += `,h_${file.client_height}`\r\n      }\r\n    }\r\n    return uploadCfg.uploadImgServer + '/' + tmpKey\r\n  }).fail(function(err) {\r\n    return err\r\n  })\r\n}\r\n\r\n// 图片上传前触发\r\nfunction beforeUpload(file, attachType) {\r\n  var defer= $.Deferred()\r\n  // 限制的大小\r\n  var limitObj = {\r\n    'image/jpeg': 2,\r\n    'video/mp4': 10\r\n  }\r\n  var limitKeys = Object.keys(limitObj)\r\n  // 不支持的格式\r\n  if(-1 === $.inArray('' + file.type, limitKeys)){\r\n    if('image' === '' + attachType){\r\n      defer.reject('你只能上传jpg格式的文件!')\r\n    }else{\r\n      defer.reject('你只能上传mp4格式的文件!')\r\n    }\r\n  }else{\r\n    const isLtSize = file.size / 1024 / 1024 < limitObj['' + file.type]\r\n    if('image/jpeg' === '' + file.type){\r\n      if (!isLtSize) {\r\n        defer.reject(`图片必须小于${ limitObj['' + file.type] }MB!`)\r\n      }else{\r\n        defer.resolve(true)\r\n      }\r\n    }else if('video/mp4' === '' + file.type){\r\n      if (!isLtSize) {\r\n        defer.reject(`mp4必须小于${ limitObj['' + file.type] }MB!`)\r\n      }else{\r\n        defer.resolve(true)\r\n      }\r\n    }\r\n  }\r\n  // console.log('file.type:', file.type, 'file.size:', file.size)\r\n\r\n  // const isJPG = file.type === 'image/jpeg'\r\n  // if (!isJPG) {\r\n  //   defer.reject('你只能上传JPG格式的文件!')\r\n  // }\r\n  // const isLt2M = file.size / 1024 / 1024 < 2\r\n  // if (!isLt2M) {\r\n  //   defer.reject('图片必须小与于2MB!')\r\n  // }\r\n  // if(isJPG && isLt2M){\r\n  //   defer.resolve(true)\r\n  // }\r\n  // 返回校验结果\r\n  return defer\r\n}\r\n\r\n// 执行上传文件到OSS\r\nfunction uploadObject2OSS(policyUrl, auth, file, group, attachType){\r\n  return beforeUpload(file, attachType)\r\n    .then((flag) => {\r\n      return getUploadCfg(policyUrl, auth, file, group)\r\n    })\r\n    .then((uploadCfg) => {\r\n      return postObject2OSS(uploadCfg, file)\r\n    })\r\n    .fail((err) => {\r\n      return err\r\n    })\r\n}\r\n\r\nexport default class extends Component {\r\n  // 构造函数\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.editItem = null;\r\n    this.state = {\r\n      visible: false,\r\n      frameWidth: 0,\r\n      // frameHeight: 0\r\n    }\r\n  }\r\n  //准备：即将被重新渲染，状态未变化\r\n  componentWillUpdate(nextProps, nextState) {}\r\n\r\n  //完成：正在被重新渲染，状态已变化\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n  }\r\n\r\n  // 已加载组件，收到新属性时调用\r\n  componentWillReceiveProps(nextProps) {\r\n    if(this.editItem && !this.editItem.html() && nextProps.html) {\r\n        this.editItem && this.editItem.html(nextProps.html);\r\n    }\r\n  }\r\n\r\n  // 插入真实 DOM\r\n  componentDidMount() {\r\n    this.initEditor(this.props)\r\n  }\r\n\r\n  initEditor(props) {\r\n    const policy_url = config.getPolicyUrl;\r\n    const auth = Cookie.get(config.cookie.auth);\r\n    const group = 'group1';\r\n    const key = Math.ceil(Math.random() * 1000000000000000);\r\n\r\n    var customConfig = {\r\n      uploadJson: \"http:\\/\\/www.dtyunx.com\",\r\n      resizeType: 0,\r\n      allowFileManager: false,\r\n      allowFlashUpload: true,\r\n      allowMediaUpload: true,\r\n      allowFileUpload: false,\r\n      afterChange: ()=>{\r\n          this.editItem && props.inputChange(this.editItem.html());\r\n      },\r\n      items: KIND_EDITOR_ITEMS_CONFIG,\r\n      // 自定义上传\r\n      customUploadImg: (files, insert, attachType)=>{\r\n        let self = this;\r\n        var file = files[0]\r\n        if(!file) return false\r\n        // file 已选择的文件对象\r\n        // home 文件对象的组名(目录)\r\n        uploadObject2OSS(policy_url, auth, file, group, attachType).then((imgUrl) => {\r\n          // 插入编辑器\r\n          insert(imgUrl)\r\n        }).fail((err) => {\r\n          if('401' === '' + err.status){\r\n            alert('登录信息失效，请重新登录')\r\n          }else{\r\n            try{\r\n              if('[object String]' === '' + Object.prototype.toString.call(err)){\r\n                alert(err || '未知的上传图片异常')\r\n                  self.editItem.hideDialog()\r\n              }else{\r\n                let errorObj = JSON.parse(err.responseText)\r\n                alert(errorObj.resultMsg || '未知的上传图片异常')\r\n              }\r\n            }catch(e){\r\n              console.error(e)\r\n              alert(e || '未知的上传图片异常')\r\n                self.editItem.hideDialog()\r\n            }\r\n          }\r\n        })\r\n      },\r\n      afterCreate: function() {\r\n        let that = this\r\n        that.sync();\r\n      },\r\n      beforeSetHtml: function() {\r\n        // console.log('beforeSetHtml')\r\n        let that = this\r\n        that.sync();\r\n      },\r\n      afterSetHtml: function() {\r\n        console.log('afterSetHtml')\r\n        let that = this\r\n        that.sync();\r\n      },\r\n      afterBlur: function() {\r\n        let that = this\r\n        that.sync();\r\n      },\r\n      // afterChange: function () {\r\n      //  let that = this\r\n      //  // that.sync();\r\n      //  // //富文本输入区域的改变事件，一般用来编写统计字数等判断\r\n      //  // console.log(\"最多20000个字符,已输入\" + that.count() + \"个字符\");\r\n      // },\r\n    }\r\n    this.editItem = KindEditor.create(`#${props.id}`, customConfig)\r\n  }\r\n\r\n  // 初始状态或状态变化会触发render\r\n  render() {\r\n    let customStyle = this.props.style || {width: '100%', height: 400}\r\n    return <div>\r\n      <script id={this.props.id} name=\"myContent\" type=\"text/plain\" style={customStyle}>\r\n      </script>\r\n    </div>\r\n  }\r\n}\r\n"]}