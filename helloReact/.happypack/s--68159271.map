{"version":3,"sources":["src\\assets\\kindEditor\\kindeditor-config.js"],"names":["window","KIND_EDITOR_ITEMS_CONFIG","random_string","len","chars","maxPos","length","pwd","i","charAt","Math","floor","random","get_suffix","filename","pos","lastIndexOf","suffix","substring","calculate_object_name","g_dirname","group","g_object_name","indexOf","decodeURIComponent","getUploadCfg","policyUrl","auth","file","$","ajax","url","type","headers","then","res","uploadCfg","uploadImgServer","data","host","uploadImgParams","OSSAccessKeyId","accessid","policy","signature","key","dir","name","size","success_action_status","fail","err","postObject2OSS","formData","FormData","ump","Object","keys","map","k","append","cache","processData","contentType","tmpKey","client_width","client_height","beforeUpload","attachType","defer","Deferred","limitObj","limitKeys","inArray","reject","isLtSize","resolve","uploadObject2OSS","flag"],"mappings":"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","file":"kindeditor-config.js","sourceRoot":"C:/Users/liu.ping/helloReact","sourcesContent":["window.KIND_EDITOR_ITEMS_CONFIG = [\r\n  \"source\",\r\n  \"|\",\r\n  \"undo\",\r\n  \"redo\",\r\n  \"|\",\r\n  \"preview\",\r\n  \"print\",\r\n  // \"template\",\r\n  // \"code\",\r\n  \"cut\",\r\n  \"copy\",\r\n  \"paste\",\r\n  \"plainpaste\",\r\n  \"wordpaste\",\r\n  \"|\",\r\n  \"justifyleft\",\r\n  \"justifycenter\",\r\n  \"justifyright\",\r\n  \"justifyfull\",\r\n  \"insertorderedlist\",\r\n  \"insertunorderedlist\",\r\n  \"indent\",\r\n  \"outdent\",\r\n  \"subscript\",\r\n  \"superscript\",\r\n  \"clearhtml\",\r\n  \"quickformat\",\r\n  \"selectall\",\r\n  \"|\",\r\n  \"fullscreen\",\r\n  \"/\",\r\n  \"formatblock\",\r\n  \"fontname\",\r\n  \"fontsize\",\r\n  \"|\",\r\n  \"forecolor\",\r\n  \"hilitecolor\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strikethrough\",\r\n  \"lineheight\",\r\n  \"removeformat\",\r\n  \"|\",\r\n  \"image\",\r\n  // \"multiimage\",\r\n  // \"flash\",\r\n  \"media\",\r\n  // \"insertfile\",\r\n  \"table\",\r\n  \"hr\",\r\n  \"emoticons\",\r\n  \"baidumap\",\r\n  \"pagebreak\",\r\n  \"anchor\",\r\n  \"link\",\r\n  \"unlink\",\r\n  \"|\",\r\n  \"about\"\r\n]\r\n\r\nfunction random_string(len) {\r\n　　len = len || 32;\r\n　　var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n　　var maxPos = chars.length;\r\n　　var pwd = '';\r\n　　for (var i = 0; i < len; i++) {\r\n  　pwd += chars.charAt(Math.floor(Math.random() * maxPos));\r\n  }\r\n  return pwd;\r\n}\r\n\r\nfunction get_suffix(filename) {\r\n  var pos = filename.lastIndexOf('.')\r\n  var suffix = ''\r\n  if (pos != -1) {\r\n      suffix = filename.substring(pos)\r\n  }\r\n  return suffix;\r\n}\r\n\r\nfunction calculate_object_name(g_dirname, group, filename) {\r\n  if(!filename){\r\n    return '';\r\n  }\r\n  var suffix = get_suffix(filename)\r\n  var g_object_name = g_dirname + random_string(10) + suffix\r\n  if(!!group){\r\n    if(g_dirname.indexOf('/') == -1){\r\n      g_dirname += '/'\r\n    }\r\n    g_object_name = decodeURIComponent(g_dirname + group + '/' + random_string(10) + suffix)\r\n  }\r\n  return g_object_name;\r\n}\r\n\r\n// 获取OSS上传配置\r\nfunction getUploadCfg(policyUrl, auth, file, group){\r\n\r\n  return $.ajax({\r\n    url: policyUrl,\r\n    type: \"GET\",\r\n    headers: { auth: auth }\r\n\r\n  }).then(function(res) {\r\n    var uploadCfg = {}\r\n\r\n    uploadCfg.uploadImgServer = res.data.host\r\n    uploadCfg.uploadImgParams = {\r\n      OSSAccessKeyId: res.data.accessid,\r\n      policy: res.data.policy,\r\n      signature: res.data.signature,\r\n      key: calculate_object_name(res.data.dir, group || 'home', file && file.name),\r\n      name: file && file.name,\r\n      size: file && file.size,\r\n      success_action_status: '200'\r\n    }\r\n    uploadCfg.file = file\r\n\r\n    return uploadCfg\r\n\r\n  }).fail(function(err) {\r\n    return err\r\n  })\r\n}\r\n\r\n// 上传对象到OSS\r\nfunction postObject2OSS(uploadCfg, file){\r\n  // FormData对象\r\n  var formData = new FormData()\r\n\r\n  // 附加参数\r\n  var ump = uploadCfg.uploadImgParams\r\n  Object.keys(ump).map((k, i) => {\r\n    formData.append(k, ump[k])\r\n  })\r\n  formData.append('file', uploadCfg.file)\r\n\r\n  // 上传文件\r\n  return $.ajax({\r\n    url: uploadCfg.uploadImgServer,\r\n    type: 'POST',\r\n    cache: false,\r\n    data: formData,\r\n    processData: false,\r\n    contentType: false\r\n  }).then(function(res) {\r\n    var tmpKey = ump.key\r\n\r\n    if(!!file.client_width || !!file.client_height){\r\n      tmpKey += '?x-oss-process=image/resize'\r\n\r\n      if(!!file.client_width){\r\n        tmpKey += `,w_${file.client_width}`\r\n      }\r\n\r\n      if(!!file.client_height){\r\n        tmpKey += `,h_${file.client_height}`\r\n      }\r\n    }\r\n    return uploadCfg.uploadImgServer + '/' + tmpKey\r\n  }).fail(function(err) {\r\n    return err\r\n  })\r\n}\r\n\r\n// 图片上传前触发\r\nfunction beforeUpload(file, attachType) {\r\n  var defer= $.Deferred()\r\n  // 限制的大小\r\n  var limitObj = {\r\n    'image/jpeg': 2,\r\n    'video/mp4': 10\r\n  }\r\n  var limitKeys = Object.keys(limitObj)\r\n  // 不支持的格式\r\n  if(-1 === $.inArray('' + file.type, limitKeys)){\r\n    if('image' === '' + attachType){\r\n      defer.reject('你只能上传jpg格式的文件!')\r\n    }else{\r\n      defer.reject('你只能上传mp4格式的文件!')\r\n    }\r\n  }else{\r\n    const isLtSize = file.size / 1024 / 1024 < limitObj['' + file.type]\r\n    if('image/jpeg' === '' + file.type){\r\n      if (!isLtSize) {\r\n        defer.reject(`图片必须小于${ limitObj['' + file.type] }MB!`)\r\n      }else{\r\n        defer.resolve(true)\r\n      }\r\n    }else if('video/mp4' === '' + file.type){\r\n      if (!isLtSize) {\r\n        defer.reject(`mp4必须小于${ limitObj['' + file.type] }MB!`)\r\n      }else{\r\n        defer.resolve(true)\r\n      }\r\n    }\r\n  }\r\n  // console.log('file.type:', file.type, 'file.size:', file.size)\r\n\r\n  // const isJPG = file.type === 'image/jpeg'\r\n  // if (!isJPG) {\r\n  //   defer.reject('你只能上传JPG格式的文件!')\r\n  // }\r\n  // const isLt2M = file.size / 1024 / 1024 < 2\r\n  // if (!isLt2M) {\r\n  //   defer.reject('图片必须小与于2MB!')\r\n  // }\r\n  // if(isJPG && isLt2M){\r\n  //   defer.resolve(true)\r\n  // }\r\n  // 返回校验结果\r\n  return defer\r\n}\r\n\r\n// 执行上传文件到OSS\r\nfunction uploadObject2OSS(policyUrl, auth, file, group, attachType){\r\n  return beforeUpload(file, attachType)\r\n  .then((flag) => {\r\n    return getUploadCfg(policyUrl, auth, file, group)\r\n  })\r\n  .then((uploadCfg) => {\r\n    return postObject2OSS(uploadCfg, file)\r\n  })\r\n  .fail((err) => {\r\n    return err\r\n  })\r\n}"]}